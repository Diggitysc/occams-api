<html i18n:domain="occams.studies" metal:use-macro="load: ../master.pt">
  <metal:content-slot fill-slot="content-slot">

    <header class="page-header">
      <div class="btn-toolbar pull-right">
        <a href="#" class="btn btn-default"><span class="glyphicon glyphicon-edit"></span> Edit</a>
        <a href="#" class="btn btn-default"><span class="glyphicon glyphicon-trash"></span> Delete</a>
      </div>
      <h1 i18n:translate="">${context.title} <small><span class="fa fa-lock" tal:condition="context.is_locked"></span></small></h1>
      <ul metal:use-macro="load: ./panels/details.pt" />
      <nav metal:use-macro="load: ./panels/nav.pt" />
    </header>

    <div style="display: none;" data-bind="visible: isReady">
      <table class="table table-bordered table-rotated-header">
        <tbody>
          <!-- ko if: study.is_randomized -->
            <tr>
              <td><strong>Randomization Form<strong></td>
              <td>
                <a href="#" class="btn btn-default"><span class="glyphicon glyphicon-random"></span> Upload RIDs</a>
              </td>
            </tr>
          <!-- /ko -->
          <tr>
            <td><strong>Termination Form<strong></td>
            <td data-bind="text: study.termination_schema.title"></td>
          </tr>
        </tbody>
      </table>
      <div class="table-responsive table-scrollable">
        <table class="table table-bordered table-striped table-dimensional table-rotated-header">
          <thead>
            <tr>
              <th></th>
              <!-- ko foreach: study.cycles -->
                <th class="rotated">
                  <div class="rotated-container">
                    <div class="rotated-rotate">
                      <span class="rotated-text" data-bind="text: title"></span>
                    </div>
                  </div>
                </th>
              <!-- /ko -->
            </tr>
          </thead>
          <tbody data-bind="foreach: study.schemata">
            <tr>
              <th data-bind="text: title"></th>
              <!-- ko foreach: $root.study.cycles -->
                <td> </td>
              <!-- /ko -->
            </tr>
          </tbody>
        </table>
      </div>
    </div> <!-- /:isReady -->

    <tal:json define="json import:json">
      <script id="study-data" type="application/json">${json.dumps(study)}</script>
    </tal:json>

  </metal:content-slot>
</html>
