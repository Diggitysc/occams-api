<!DOCTYPE html>
<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xml:lang="en"
    lang="en"
    i18n:domain="occams.clinical">

  <head>
    <meta charset="utf-8">
    <title>${request.settings.app.title|'OCCAMS Clinical'}</title>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link tal:repeat="url layout.styles.urls()" href="${url}" rel="stylesheet" />
    <!--! Shortcut icons -->
    <link
        rel="shortcut icon"
        href="${request.static_path('occams.clinical:static/images/favicon.ico')}"/>
    <link rel="shortcut icon" sizes="1024x1024" href="favicon-highres.png">
    <link rel="shortcut icon" sizes="128x128" href="favicon.png">
    <link rel="apple-touch-icon" sizes="128x128" href="favicon.png">
    <link rel="apple-touch-icon-precomposed" sizes="128x128" href="favicon.png">
  </head>

  <!--! socket.io HATES leading-following slashes in resource paths... -->
  <body
      id="body"
      data-view-name="${request.matched_route.name}"
      data-view-path="${request.current_route_path()}"
      data-socket-io-resource="${request.route_path('socket.io', remaining='').strip('/')}">

    <!--! Wrap the content so we can push the footer to the bottom of the page -->
    <div id="wrap">
      <!--! Keep the app navbar separate from the content container -->
      <header tal:replace="panel('app_header')" />
      <div class="container">
        <header class="page-header" tal:condition="layout.show_header">
          <menu class="pull-right"><button tal:replace="panel('menu')" /></menu>
          <h1>${layout.title}
            <small tal:condition="layout.subtitle">${layout.subtitle}</small>
          </h1>
          <ul tal:replace="panel('details')" />
          <nav tal:replace="panel('nav')" />
        </header>
        <tal:alerts repeat="type ('error', 'warning', 'info', 'success')">
          <div
              class="alert alert-${type}"
              tal:repeat="msg request.session.pop_flash(type)">
            <button type="button" class="close" data-dismiss="alert"
                aria-hidden="true">&times;</button>
            ${msg}
          </div>
        </tal:alerts>
        <main id="${request.matched_route.name}">
          <metal:content-slot define-slot="content-slot" />
        </main>
      </div> <!-- /.container -->
    </div> <!-- /#wrap -->

    <div
        id="modal"
        class="modal fade"
        tabindex="-1"
        role="dialog"
        aria-hidden="true">
      <div class="modal-dialog"><div class="modal-content"></div></div>
    </div>

    <div tal:replace="panel('app_footer')" />

    <!--! Load scripts at the end so we don't block rendering -->
    <script
        tal:repeat="url layout.scripts.urls()"
        src="${url}"
        type="text/javascript"> </script>

  </body>
</html>

