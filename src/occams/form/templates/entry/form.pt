<metal:use use-macro="context/@@ploneform-macros/titlelessform">
  <metal:formtop-slot fill-slot="formtop">
    <tal:hasstate condition="exists:view/formState">
      <h4>Current State:</h4>
      <ul>
        <li tal:attributes="class view/formState" tal:content="view/formState" />
      </ul>
    </tal:hasstate>
    <tal:hasprotocols condition="exists:context/protocols">
      <h4>Collected for:</h4>
      <ul>
        <tal:protocols tal:repeat="protocol context/protocols">
          <li tal:content=" protocol" />
        </tal:protocols>
      </ul>
    </tal:hasprotocols>
    <div tal:condition="python: view.formState == 'not-done'">
        <p>This form has been marked as not done and so no data is being displayed</p>
    </div>

  </metal:formtop-slot>

</metal:use>
