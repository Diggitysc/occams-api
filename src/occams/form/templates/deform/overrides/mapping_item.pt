<li tal:define="error_class error_class|field.widget.error_class;
                description description|field.description;
                title title|field.title;
                oid oid|field.oid;
                hidden hidden|field.widget.hidden;
                category category|field.widget.category;
                required required|field.required;
                "
    class="field control-group ${field.error and ' ' + (error_class or '')}"
    title="${description}"
    id="item-${oid}"
    tal:omit-tag="hidden"
    i18n:domain="deform">

  <!--! This is an override of deform's default mapping_item.pt template
        to allow us to display field descriptions and a nicer looking
        required symbol. -->

  <!-- mapping_item -->

  <label tal:condition="not (hidden or category == 'structural')"
         class="control-label"
         for="${oid}"
         >${title}<sup tal:condition="required" class="req"
                        id="req-${oid}">&#9632;</sup>
  </label>

  <span class="description help-block" tal:condition="description">${description}</span>

  <span tal:replace="structure field.serialize(cstruct)"/>

  <p tal:condition="field.error and not hidden and not field.typ.__class__.__name__=='Mapping'"
     tal:define="errstr 'error-%s' % oid"
     tal:repeat="msg field.error.messages()"
     tal:attributes="id repeat.msg.index==0 and errstr or
     ('%s-%s' % (errstr, repeat.msg.index))"
     class="status help-block ${error_class}"
     i18n:translate="">${msg}</p>

  <!-- /mapping_item -->

</li>
