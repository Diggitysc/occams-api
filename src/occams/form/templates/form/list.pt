<!DOCTYPE html>
<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xml:lang="en"
    lang="en"
    i18n:domain="occams.form"
    metal:use-macro="main_template">
  <metal:content-slot fill-slot="content-slot">
    <p class="well well-lg" tal:condition="not:forms_count">
      No forms have been created yet.
    </p>
    <div tal:condition="forms_count">
      <p tal:condition="python: forms_count">
        There are <strong>${forms_count}</strong> forms in the system.
      </p>
      <table id="forms" class="table table-hover table-striped"
          tal:condition="forms_count">
        <thead>
          <tr>
            <th class="has_private">
              <span class="glyphicon glyphicon-user"></span>
            </th>
            <th class="title">Form</th>
            <th class="name">Schema</th>
            <th class="publish_date">Version</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:define="highlight highlight|nothing"
              tal:repeat="form forms"
              tal:attributes="class python:'success' if form.name == highlight else ''">
            <td class="has_private">
              <span
                  class="glyphicon glyphicon-user"
                  title="Has private information"
                  tal:condition="form.has_private"></span>
            </td>
            <td class="title">${form.title}</td>
            <td class="name"><code>${form.name}</code></td>
            <td class="publish_date"
                tal:define="url request.route_path('form_view',
                                                   form=form.name,
                                                   version=form.publish_date or form.id);">
              <tal:switch switch="form.publish_date is not None">
                <a href="${url}" tal:case="True">${form.publish_date}</a>
                <a href="${url}" tal:case="False">draft</a>
              </tal:switch>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </metal:content-slot>
</html>

