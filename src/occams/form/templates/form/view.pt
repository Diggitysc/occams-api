<!DOCTYPE html>
<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xml:lang="en"
    lang="en"
    i18n:domain="occams.form"
    metal:use-macro="main_template">
  <metal:content-slot fill-slot="content-slot">

    <h4>Categories</h4>
    <p class="well">
      <span tal:condition="not:categories_count">This form has no categories</span>
      <span class="label label-info"
          tal:condition="categories_count"
          tal:repeat="category categories">${category.title}</span>
    </p>

    <h4>Versions</h4>
    <p class="well" tal:condition="not:versions_count">
      Curious, there doesn't appear to be any versions of this form.
      How did you even get here?
    </p>
    <table class="table table-hover table-striped"
        tal:condition="versions_count">
      <thead>
        <tr>
          <th class="is_current"></th>
          <th class="publish_date">Published</th>
          <th class="retract_date">Retracted</th>
          <th class="create_date">Created</th>
          <th class="create_user">Creator</th>
          <th class="modify_date">Modified</th>
          <th class="modify_user">Modifier</th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="version versions"
            tal:attributes="class python:'info' if version.is_current else ''">
          <td class="is_current">
            <i class="icon-star" tal:condition="version.is_current"></i>
            <i class="icon-ban-circle" tal:condition="version.retract_date"></i>
          </td>
          <td class="publish_date">
            <a href=""
                tal:define="
                  published python:version.publish_date is not None;
                  version python:version.publish_date.isoformat() if published else version.id;
                  title python:version if published else 'draft';
                  href python:request.current_route_path(
                        _route_name='version_view',
                        version=version);"
                tal:attributes="
                  href href;
                  class 'label' if not published else ''">${title}</a>
          </td>
          <td class="retract_date">${version.retract_date.isoformat()|nothing}</td>
          <td class="create_date">${version.create_date.date().isoformat()}</td>
          <td class="create_user">${version.create_user}</td>
          <td class="modify_date">${version.modify_date.date().isoformat()}</td>
          <td class="modify_user">${version.modify_user}</td>
        </tr>
      </tbody>
    </table>

  </metal:content-slot>
</html>

